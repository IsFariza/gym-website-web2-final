<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Login | PinkPower</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="auth-body">

<div class="auth-box">
  <h2>Welcome Back üíó</h2>

  <form id="loginForm">
    <input type="email" id="email" placeholder="Email" required />
    <input type="password" id="password" placeholder="Password" required />
    <button type="submit">Login üíñ</button>
  </form>

  <p>
    Don‚Äôt have an account? 
    <a href="register.html">Register</a>
  </p>
</div>

<script src="auth.js"></script>
<script>
document.getElementById("loginForm").addEventListener("submit", async e => {
  e.preventDefault();

  try {
    // –î–æ–±–∞–≤–∏–ª–∏ /api/auth (–ø—Ä–æ–≤–µ—Ä—å, –∫–∞–∫ —É —Ç–µ–±—è –≤ server.js –ø–æ–¥–∫–ª—é—á–µ–Ω authRouter)
    const res = await fetch("http://localhost:5000/api/auth/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        email: document.getElementById('email').value,
        password: document.getElementById('password').value
      })
    });

    const data = await res.json();

    if (res.ok) {
      localStorage.setItem("token", data.token); // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–∫–µ–Ω
      window.location.href = "profile.html";     // –õ–µ—Ç–∏–º –≤ –ø—Ä–æ—Ñ–∏–ª—å
    } else {
      alert("–û—à–∏–±–∫–∞: " + data.message);
    }
  } catch (err) {
    console.error("–°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:", err);
    alert("–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º. –ü—Ä–æ–≤–µ—Ä—å, –∑–∞–ø—É—â–µ–Ω –ª–∏ –±—ç–∫–µ–Ω–¥!");
  }
});
</script>

</body>
</html>
